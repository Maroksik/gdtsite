<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GDT Team</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="analytics.css">
</head>
<body>
    <div class="stars" id="stars"></div>

    <!-- –ï–∫—Ä–∞–Ω –≤—Ö–æ–¥—É -->
    <div class="login-container" id="loginContainer">
        <div class="login-box">
            <div class="logo">GDT</div>
            <p class="subtitle">–ö–æ–º–∞–Ω–¥–∞ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤</p>
            <form id="loginForm">
                <div class="input-group">
                    <label for="username">–õ–æ–≥—ñ–Ω:</label>
                    <input type="text" id="username" name="username" required>
                </div>
                <div class="input-group">
                    <label for="password">–ü–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" class="login-btn">–£–≤—ñ–π—Ç–∏</button>
                <div id="errorMessage" class="error-message" style="display: none;"></div>
            </form>
        </div>
    </div>

    <!-- –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ -->
    <div class="main-content" id="mainContent">
        <button class="logout-btn" onclick="logout()">–í–∏–π—Ç–∏</button>
        
        <div class="header">
            <h1>GDT Team</h1>
        </div>

        <div class="content-section">
            <!-- –®–≤–∏–¥–∫—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è -->
            <div class="quick-links">
                <div class="links-grid" id="quickLinksGrid">
                    <!-- –ó–∞–ø–æ–≤–Ω—é—î—Ç—å—Å—è JavaScript -->
                </div>
            </div>

            <div class="grid">
                <div class="card">
                    <h3>üìä –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –ø–∏–ª–æ–∫</h3>
                    <p>–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ—Ö—ñ–¥–Ω–æ—Å—Ç—ñ –ø—Ä–æ–µ–∫—Ç—ñ–≤ —Ç–∞ —Å—Ç–∞—Ç—É—Å—ñ–≤ –º–æ–¥–µ—Ä–∞—Ü—ñ—ó</p>
                    <button class="manage-btn" onclick="showAnalytics()">–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏</button>
                </div>

                <!-- –ö–æ—Ä–∏—Å–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ -->
                <div class="card">
                    <h3>üõ†Ô∏è –ù–∞—à—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è</h3>
                    <div class="tools-list">
                        <a href="https://nekloaka.top" target="_blank" class="tool-link">
                            <span class="tool-icon">üíª</span>
                            <div>
                                <strong>–¢–µ—Å—Ç–æ–≤–∞ –∫–ª–æ–∞–∫–∞</strong>
                            </div>
                        </a>
                        <a href="https://nekloaka.top/dashboard.html" target="_blank" class="tool-link">
                            <span class="tool-icon">üöÄ</span>
                            <div>
                                <strong>–ö–ª–æ–∞–∫–∞ –¥–∞—à–±–æ—Ä–¥</strong>
                            </div>
                        </a>
                        <a href="https://maroksik.github.io/LinkSplitter/" target="_blank" class="tool-link">
                            <span class="tool-icon">üì°</span>
                            <div>
                                <strong>–†–æ–∑–±–∏–≤–∫–∞ –ª—ñ–Ω–∫—ñ–≤</strong>
                            </div>
                        </a>
                        <a href="https://bober93.github.io/kotest/" target="_blank" class="tool-link">
                            <span class="tool-icon">üé®</span>
                            <div>
                                <strong>–¢–µ—Å—Ç–µ—Ä –í–µ–±–í—é (–±–æ–±–µ—Ä)</strong>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏ -->
        <div id="linksModal" class="modal">
            <div class="modal-content">
                <h3>üîó –ö–µ—Ä—É–≤–∞–Ω–Ω—è –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏</h3>
                <div class="modal-form">
                    <input type="text" id="linkName" placeholder="–ù–∞–∑–≤–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è" class="modal-input">
                    <input type="url" id="linkUrl" placeholder="https://example.com" class="modal-input">
                    <input type="text" id="linkIcon" placeholder="üîó (–µ–º–æ–¥–∑—ñ)" class="modal-input">
                    <div class="modal-buttons">
                        <button onclick="saveLink()" class="save-btn">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                        <button onclick="closeModal()" class="cancel-btn">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ï–∫—Ä–∞–Ω –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ -->
    <div class="analytics-screen" id="analyticsScreen" style="display: none;">
        <div class="stars analytics-stars" id="analyticsStars"></div>

        <div class="main-content">
            <div class="header">
                <button class="back-btn" onclick="returnToMain()">‚Üê –ù–∞–∑–∞–¥</button>
                <h1>üìä –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –ø–∏–ª–æ–∫</h1>
                <p>–î–µ—Ç–∞–ª—å–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ—Ö—ñ–¥–Ω–æ—Å—Ç—ñ –ø—Ä–æ–µ–∫—Ç—ñ–≤ —Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</p>
            </div>

            <!-- –ó–∞–≥–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="analytics-overview">
                <div class="stat-card">
                    <div class="stat-icon">üìà</div>
                    <div class="stat-info">
                        <div class="stat-number" id="totalProjects">0</div>
                        <div class="stat-label">–í—Å—å–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—ñ–≤</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">‚ö™</div>
                    <div class="stat-info">
                        <div class="stat-number" id="whitePassRate">0%</div>
                        <div class="stat-label">–ü—Ä–æ—Ö—ñ–¥–Ω—ñ—Å—Ç—å –±—ñ–ª–æ—ó</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">‚ö´</div>
                    <div class="stat-info">
                        <div class="stat-number" id="grayPassRate">0%</div>
                        <div class="stat-label">–ü—Ä–æ—Ö—ñ–¥–Ω—ñ—Å—Ç—å —Å—ñ—Ä–æ—ó</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">‚è±Ô∏è</div>
                    <div class="stat-info">
                        <div class="stat-number" id="avgLifespan">0</div>
                        <div class="stat-label">–°–µ—Ä–µ–¥–Ω—î –∂–∏—Ç—Ç—è (–¥–Ω—ñ–≤)</div>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">‚ùå</div>
                    <div class="stat-info">
                        <div class="stat-number" id="totalBans">0</div>
                        <div class="stat-label">–í—Å—å–æ–≥–æ –±–∞–Ω—ñ–≤</div>
                    </div>
                </div>
            </div>

            <!-- –ì—Ä–∞—Ñ—ñ–∫–∏ -->
            <div class="charts-section">
                <div class="chart-container">
                    <h3>üìä –ü—Ä–æ—Ö—ñ–¥–Ω—ñ—Å—Ç—å –ø–æ –µ—Ç–∞–ø–∞—Ö</h3>
                    <canvas id="passRateChart"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3>üìà –î–∏–Ω–∞–º—ñ–∫–∞ –ø—Ä–æ–µ–∫—Ç—ñ–≤ –ø–æ —á–∞—Å—É</h3>
                    <canvas id="timelineChart"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3>ü•ß –°—Ç–∞—Ç—É—Å–∏ –ø—Ä–æ–µ–∫—Ç—ñ–≤</h3>
                    <canvas id="statusChart"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3>‚è∞ –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å –∂–∏—Ç—Ç—è –ø—Ä–æ–µ–∫—Ç—ñ–≤</h3>
                    <canvas id="lifespanChart"></canvas>
                </div>
            </div>

            <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è -->
            <div class="control-panel">
                <div class="filters-section">
                    <h3>üîç –§—ñ–ª—å—Ç—Ä–∏</h3>
                    <div class="filter-group">
                        <label for="dateFrom">–í—ñ–¥ –¥–∞—Ç–∏:</label>
                        <input type="date" id="dateFrom" class="filter-input">
                    </div>
                    <div class="filter-group">
                        <label for="dateTo">–î–æ –¥–∞—Ç–∏:</label>
                        <input type="date" id="dateTo" class="filter-input">
                    </div>
                    <div class="filter-group">
                        <label for="statusFilter">–°—Ç–∞—Ç—É—Å:</label>
                        <select id="statusFilter" class="filter-input">
                            <option value="all">–í—Å—ñ</option>
                            <option value="active">–ê–∫—Ç–∏–≤–Ω—ñ</option>
                            <option value="banned">–ó–∞–±–∞–Ω–µ–Ω—ñ</option>
                            <option value="passed">–ü—Ä–æ–π—à–ª–∏</option>
                        </select>
                    </div>
                    <button class="filter-btn" onclick="applyFilters()">–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏</button>
                    <button class="reset-btn" onclick="resetFilters()">–°–∫–∏–Ω—É—Ç–∏</button>
                </div>
                
                <div class="actions-section">
                    <button class="add-project-btn" onclick="openAddProjectModal()">
                        ‚ûï –î–æ–¥–∞—Ç–∏ –ø—Ä–æ–µ–∫—Ç
                    </button>
                    <button class="export-btn" onclick="exportAnalytics()">
                        üì§ –ï–∫—Å–ø–æ—Ä—Ç
                    </button>
                </div>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç—ñ–≤ -->
            <div class="projects-section">
                <div class="section-header">
                    <h3>üìã –ü—Ä–æ–µ–∫—Ç–∏</h3>
                    <div class="view-toggle">
                        <button class="toggle-btn active" onclick="setView('grid')" data-view="grid">üî≥</button>
                        <button class="toggle-btn" onclick="setView('list')" data-view="list">üìã</button>
                    </div>
                </div>
                <div class="projects-grid" id="projectsGrid">
                    <!-- –ü—Ä–æ–µ–∫—Ç–∏ –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ —Ç—É—Ç —á–µ—Ä–µ–∑ JavaScript -->
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É -->
        <div id="projectModal" class="modal">
            <div class="modal-content">
                <h3 id="modalTitle">‚ûï –ù–æ–≤–∏–π –ø—Ä–æ–µ–∫—Ç</h3>
                <div class="modal-form">
                    <input type="text" id="projectName" placeholder="–ù–∞–∑–≤–∞ –ø—Ä–æ–µ–∫—Ç—É" class="modal-input" required>
                    <textarea id="projectDescription" placeholder="–û–ø–∏—Å –ø—Ä–æ–µ–∫—Ç—É (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)" class="modal-input" rows="3"></textarea>
                    <input type="url" id="projectUrl" placeholder="URL –ø—Ä–æ–µ–∫—Ç—É (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)" class="modal-input">
                    
                    <div class="form-group">
                        <label>–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è:</label>
                        <input type="date" id="projectCreatedDate" class="modal-input" required>
                    </div>
                    
                    <div class="modal-buttons">
                        <button onclick="saveProject()" class="save-btn">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                        <button onclick="closeProjectModal()" class="cancel-btn">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–µ—Ç–∞–ª–µ–π –ø—Ä–æ–µ–∫—Ç—É -->
        <div id="projectDetailsModal" class="modal">
            <div class="modal-content large">
                <h3 id="detailsTitle">üìä –î–µ—Ç–∞–ª—ñ –ø—Ä–æ–µ–∫—Ç—É</h3>
                <div id="projectDetailsContent">
                    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ –∑–∞–ø–æ–≤–Ω–µ–Ω–∏–π —á–µ—Ä–µ–∑ JavaScript -->
                </div>
                <div class="modal-buttons">
                    <button onclick="closeDetailsModal()" class="cancel-btn">–ó–∞–∫—Ä–∏—Ç–∏</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –°–∫—Ä–∏–ø—Ç–∏ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="script.js"></script>
    <script src="analytics-data.js"></script>
    <script src="analytics-charts.js"></script>
    <script src="analytics.js"></script>
    
    <script>
        // –í–∏–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥—ñ–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥—ñ–≤ –º—ñ–∂ —Å—Ç–æ—Ä—ñ–Ω–∫–∞–º–∏
        
        // –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Å—Ç–∞–Ω–æ–º
        let currentScreen = 'login'; // 'login', 'main', 'analytics'
        let analyticsInitialized = false;

        // –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
        const CONFIG = {
            starCount: 100,
            validCredentials: {
                'admin': '120521',
            }
        };

        // –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö
        const DataStore = {
            getQuickLinks: () => JSON.parse(localStorage.getItem('gdtQuickLinks') || '[]'),
            setQuickLinks: (links) => localStorage.setItem('gdtQuickLinks', JSON.stringify(links))
        };

        // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑—ñ—Ä–æ–∫ –¥–ª—è —Ñ–æ–Ω—É
        function createStars(containerId = 'stars') {
            const starsContainer = document.getElementById(containerId);
            if (!starsContainer) return;
            
            starsContainer.innerHTML = '';
            const numStars = CONFIG.starCount;

            for (let i = 0; i < numStars; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 2 + 's';
                starsContainer.appendChild(star);
            }
        }

        // –§—É–Ω–∫—Ü—ñ—ó –ø–µ—Ä–µ—Ö–æ–¥—É –º—ñ–∂ –µ–∫—Ä–∞–Ω–∞–º–∏
        function showScreen(screenName) {
            // –ü—Ä–∏—Ö–æ–≤–∞—Ç–∏ –≤—Å—ñ –µ–∫—Ä–∞–Ω–∏
            const screens = ['loginContainer', 'mainContent', 'analyticsScreen'];
            screens.forEach(screen => {
                const element = document.getElementById(screen);
                if (element) {
                    element.style.display = 'none';
                }
            });

            // –ü–æ–∫–∞–∑–∞—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω–∏–π –µ–∫—Ä–∞–Ω
            const targetScreen = document.getElementById(screenName);
            if (targetScreen) {
                targetScreen.style.display = screenName === 'loginContainer' ? 'flex' : 'block';
                currentScreen = screenName.replace('Container', '').replace('Screen', '');
            }
        }

        // –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
        function login(username, password) {
            return CONFIG.validCredentials[username] === password;
        }

        function checkAuth() {
            const isLoggedIn = sessionStorage.getItem('gdtLoggedIn');
            if (isLoggedIn === 'true') {
                showMainContent();
            }
        }

        function showMainContent() {
            showScreen('mainContent');
            loadQuickLinks();
        }

        function logout() {
            sessionStorage.removeItem('gdtLoggedIn');
            showScreen('loginContainer');
            document.getElementById('loginForm').reset();
            
            const errorMessage = document.getElementById('errorMessage');
            errorMessage.style.display = 'none';
            currentScreen = 'login';
        }

        // –ü–æ–∫–∞–∑–∞—Ç–∏ –µ–∫—Ä–∞–Ω –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏
        function showAnalytics() {
            console.log('–ü–µ—Ä–µ—Ö—ñ–¥ –¥–æ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏...');
            showScreen('analyticsScreen');
            
            // –°—Ç–≤–æ—Ä–∏—Ç–∏ –∑—ñ—Ä–∫–∏ –¥–ª—è –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏
            createStars('analyticsStars');
            
            // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∞–Ω–∞–ª—ñ—Ç–∏–∫—É, —è–∫—â–æ —â–µ –Ω–µ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞
            if (!analyticsInitialized) {
                initializeAnalytics();
                analyticsInitialized = true;
            }
        }

        // –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –Ω–∞ –≥–æ–ª–æ–≤–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É
        function returnToMain() {
            console.log('–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –Ω–∞ –≥–æ–ª–æ–≤–Ω—É...');
            showScreen('mainContent');
        }

        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏
        function initializeAnalytics() {
            console.log('–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏...');
            
            // –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π Chart.js
            if (typeof Chart === 'undefined') {
                console.error('Chart.js –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ!');
                return;
            }

            // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∏ –¥–∞–Ω–∏—Ö —Ç–∞ –≥—Ä–∞—Ñ—ñ–∫—ñ–≤
            if (typeof AnalyticsDataManager !== 'undefined') {
                window.analyticsDataManager = new AnalyticsDataManager();
            }
            
            if (typeof AnalyticsChartsManager !== 'undefined') {
                window.analyticsChartsManager = new AnalyticsChartsManager();
                window.analyticsChartsManager.initializeCharts();
                window.analyticsChartsManager.setupResponsive();
            }

            // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –¥–æ–¥–∞—Ç–æ–∫ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏
            if (typeof AnalyticsApp !== 'undefined') {
                window.analyticsApp = new AnalyticsApp();
                window.analyticsApp.initialize();
            }
        }

        // –û–±—Ä–æ–±–∫–∞ —Ñ–æ—Ä–º–∏ –≤—Ö–æ–¥—É
        function handleLogin(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value;

            if (!username || !password) {
                showLoginError('–ë—É–¥—å –ª–∞—Å–∫–∞, –∑–∞–ø–æ–≤–Ω—ñ—Ç—å –≤—Å—ñ –ø–æ–ª—è!');
                return;
            }

            if (login(username, password)) {
                sessionStorage.setItem('gdtLoggedIn', 'true');
                showMainContent();
                document.getElementById('errorMessage').style.display = 'none';
            } else {
                showLoginError('–ù–µ–≤—ñ—Ä–Ω–∏–π –ª–æ–≥—ñ–Ω –∞–±–æ –ø–∞—Ä–æ–ª—å!');
            }
        }

        function showLoginError(message) {
            const errorMessage = document.getElementById('errorMessage');
            const loginBox = document.querySelector('.login-box');
            
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
            
            loginBox.style.animation = 'shake 0.5s ease-in-out';
            setTimeout(() => {
                loginBox.style.animation = 'slideIn 0.8s ease-out';
            }, 500);
        }

        // –®–≤–∏–¥–∫—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è
        function loadQuickLinks() {
            const links = DataStore.getQuickLinks();
            const container = document.getElementById('quickLinksGrid');
            
            if (!container) return;
            
            container.innerHTML = links.map(link => `
                <a href="${link.url}" target="_blank" class="quick-link">
                    <span class="quick-link-icon">${link.icon}</span>
                    <span class="quick-link-name">${link.name}</span>
                    <button class="delete-btn" onclick="deleteQuickLink('${link.name}', event)">√ó</button>
                </a>
            `).join('');
        }

        function deleteQuickLink(name, event) {
            event.preventDefault();
            event.stopPropagation();
            
            if (confirm(`–í–∏–¥–∞–ª–∏—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è "${name}"?`)) {
                const links = DataStore.getQuickLinks().filter(link => link.name !== name);
                DataStore.setQuickLinks(links);
                loadQuickLinks();
            }
        }

        // –ú–æ–¥–∞–ª—å–Ω—ñ –≤—ñ–∫–Ω–∞
        function closeModal() {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                modal.style.display = 'none';
            });
        }

        function saveLink() {
            const name = document.getElementById('linkName').value.trim();
            const url = document.getElementById('linkUrl').value.trim();
            const icon = document.getElementById('linkIcon').value.trim() || 'üîó';
            
            if (!name || !url) {
                alert('–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –Ω–∞–∑–≤—É —Ç–∞ URL');
                return;
            }
            
            const links = DataStore.getQuickLinks();
            links.push({ name, url, icon });
            DataStore.setQuickLinks(links);
            loadQuickLinks();
            closeModal();
        }

        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
        function init() {
            createStars();
            checkAuth();
            
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', handleLogin);
            }

            // –ó–∞–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª—å–Ω–∏—Ö –≤—ñ–∫–æ–Ω –ø–æ –∫–ª—ñ–∫—É –ø–æ–∑–∞ –Ω–∏–º–∏
            window.addEventListener('click', function(event) {
                const modals = document.querySelectorAll('.modal');
                modals.forEach(modal => {
                    if (event.target === modal) {
                        closeModal();
                    }
                });
            });
        }

        // –ó–∞–ø—É—Å–∫ –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è DOM
        document.addEventListener('DOMContentLoaded', init);

        // –ì–ª–æ–±–∞–ª—å–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –≤–∏–∫–ª–∏–∫—ñ–≤ –∑ HTML
        window.showAnalytics = showAnalytics;
        window.returnToMain = returnToMain;
        window.logout = logout;
        window.deleteQuickLink = deleteQuickLink;
        window.closeModal = closeModal;
        window.saveLink = saveLink;
        
        // –§—É–Ω–∫—Ü—ñ—ó –¥–ª—è –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ (–±—É–¥—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è –∫–æ–ª–∏ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞)
        window.openAddProjectModal = () => {
            if (window.analyticsApp) window.analyticsApp.openAddProjectModal();
        };
        
        window.closeProjectModal = () => {
            if (window.analyticsApp) window.analyticsApp.closeProjectModal();
        };
        
        window.saveProject = () => {
            if (window.analyticsApp) window.analyticsApp.saveProject();
        };
        
        window.applyFilters = () => {
            if (window.analyticsApp) window.analyticsApp.applyFilters();
        };
        
        window.resetFilters = () => {
            if (window.analyticsApp) window.analyticsApp.resetFilters();
        };
        
        window.setView = (view) => {
            if (window.analyticsApp) window.analyticsApp.setView(view);
        };
        
        window.exportAnalytics = () => {
            if (window.analyticsApp) window.analyticsApp.exportAnalytics();
        };
        
        window.closeDetailsModal = () => {
            if (window.analyticsApp) window.analyticsApp.closeDetailsModal();
        };
    </script>
</body>
</html>